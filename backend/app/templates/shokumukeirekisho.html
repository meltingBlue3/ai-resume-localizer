<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="base.css">
    <style>
        /* ===== Title and header ===== */
        .title-table td {
            border: none;
            padding: 0 0 3mm 0;
        }
        .title-text {
            font-size: 18pt;
            font-weight: bold;
            text-align: center;
        }
        .header-date {
            text-align: right;
            font-size: 10pt;
        }
        .header-name {
            text-align: right;
            font-size: 11pt;
        }

        /* ===== Section headers ===== */
        .section-title {
            font-size: 12pt;
            font-weight: bold;
            border-bottom: 1.5pt solid #000;
            padding: 2mm 0;
            margin: 0;
        }
        .section-title-row td {
            border: none;
            padding: 5mm 0 1mm 0;
        }

        /* ===== Career summary ===== */
        .summary-row td {
            border: none;
            padding: 2mm 0;
            line-height: 1.8;
        }

        /* ===== Work history blocks ===== */
        .company-header-row td {
            border: none;
            padding: 4mm 0 1mm 0;
            font-weight: bold;
            font-size: 11pt;
        }
        .company-meta-table td {
            border: none;
            padding: 1mm 2mm;
            font-size: 9.5pt;
            vertical-align: top;
        }
        .company-meta-label {
            width: 25mm;
            font-weight: bold;
            color: #333;
        }
        .work-detail-row td {
            border: none;
            padding: 1mm 0 1mm 4mm;
            font-size: 10pt;
        }
        .subsection-label {
            border: none;
            padding: 3mm 0 1mm 0;
            font-weight: bold;
            font-size: 10pt;
        }
        .bullet-row td {
            border: none;
            padding: 0.5mm 0 0.5mm 6mm;
            font-size: 10pt;
            line-height: 1.6;
        }

        /* ===== Skills table ===== */
        .skills-table th {
            background-color: #f5f5f5;
            font-weight: bold;
            text-align: center;
            height: 8mm;
            vertical-align: middle;
        }
        .skills-table td {
            height: 8mm;
            vertical-align: middle;
            padding: 2mm 3mm;
        }
        .skills-category {
            width: 35mm;
            text-align: center;
            font-weight: bold;
        }

        /* ===== Certifications table ===== */
        .cert-table th {
            background-color: #f5f5f5;
            font-weight: bold;
            text-align: center;
            height: 8mm;
            vertical-align: middle;
        }
        .cert-table td {
            height: 8mm;
            vertical-align: middle;
            padding: 2mm 3mm;
        }
        .cert-date {
            width: 30mm;
            text-align: center;
        }

        /* ===== Self-PR section ===== */
        .selfpr-row td {
            border: none;
            padding: 2mm 0;
            line-height: 1.8;
            font-size: 10pt;
        }

        /* ===== Separator line ===== */
        .separator-row td {
            border: none;
            padding: 0;
            height: 2mm;
        }
    </style>
</head>
<body>

<!-- ============================================================ -->
<!-- PAGE 1                                                        -->
<!-- ============================================================ -->
<div class="page">

    <!-- Title -->
    <table class="title-table">
        <tr>
            <td class="title-text">職 務 経 歴 書</td>
        </tr>
    </table>

    <!-- Date and Name -->
    <table class="title-table">
        <colgroup>
            <col style="width: 50%;">
            <col style="width: 50%;">
        </colgroup>
        <tr>
            <td></td>
            <td class="header-date">{{ data.current_date_wareki }}</td>
        </tr>
        <tr>
            <td></td>
            <td class="header-name">{{ data.personal_info.name | default('未記入', true) }}</td>
        </tr>
    </table>

    <!-- ===== 職務要約 (Career Summary) ===== -->
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">職務要約</span></td>
        </tr>
    </table>
    <table class="title-table">
        <tr class="summary-row">
            <td>
                {{ data.summary | default('未記入', true) }}
            </td>
        </tr>
    </table>

    <!-- ===== 職務経歴 (Work History) ===== -->
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">職務経歴</span></td>
        </tr>
    </table>

    {% for job in data.work_history %}
    <!-- Company block -->
    <table class="title-table">
        <tr class="company-header-row">
            <td>{{ job.company | default('未記入') }}　（{{ job.start_date | default('') }}〜{{ job.end_date | default('現在') }}）</td>
        </tr>
    </table>

    {% if job.responsibilities %}
    <table class="title-table">
        <tr>
            <td class="subsection-label">【業務内容】</td>
        </tr>
    </table>
    <table class="title-table">
        {% for item in job.responsibilities %}
        <tr class="bullet-row"><td>・{{ item }}</td></tr>
        {% endfor %}
    </table>
    {% endif %}

    {% if job.achievements %}
    <table class="title-table">
        <tr>
            <td class="subsection-label">【実績・成果】</td>
        </tr>
    </table>
    <table class="title-table">
        {% for item in job.achievements %}
        <tr class="bullet-row"><td>・{{ item }}</td></tr>
        {% endfor %}
    </table>
    {% endif %}
    {% if job.projects %}
    <table class="title-table">
        <tr>
            <td class="subsection-label">【参画プロジェクト】</td>
        </tr>
    </table>
    {% for project in job.projects %}
    <table class="title-table">
        <tr class="work-detail-row">
            <td>
                <strong>{{ project.name | default('') }}</strong>
                {% if project.role %}（{{ project.role }}）{% endif %}
                {% if project.start_date %}　{{ project.start_date }}{% if project.end_date %}〜{{ project.end_date }}{% else %}〜現在{% endif %}{% endif %}
            </td>
        </tr>
    </table>
    {% if project.description %}
    <table class="title-table">
        <tr class="bullet-row"><td>　{{ project.description }}</td></tr>
    </table>
    {% endif %}
    {% if project.technologies %}
    <table class="title-table">
        <tr class="bullet-row"><td>　使用技術：{{ project.technologies | join('、') }}</td></tr>
    </table>
    {% endif %}
    {% endfor %}
    {% endif %}
    {% endfor %}

    <!-- ===== 個人プロジェクト (Personal Projects) ===== -->
    {% if data.projects %}
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">個人プロジェクト</span></td>
        </tr>
    </table>
    {% for project in data.projects %}
    <table class="title-table">
        <tr class="company-header-row">
            <td>
                <strong>{{ project.name | default('未記入') }}</strong>
                {% if project.role %}（{{ project.role }}）{% endif %}
                {% if project.start_date %}　{{ project.start_date }}{% if project.end_date %}〜{{ project.end_date }}{% else %}〜現在{% endif %}{% endif %}
            </td>
        </tr>
    </table>
    {% if project.description %}
    <table class="title-table">
        <tr class="bullet-row"><td>　{{ project.description }}</td></tr>
    </table>
    {% endif %}
    {% if project.technologies %}
    <table class="title-table">
        <tr class="bullet-row"><td>　使用技術：{{ project.technologies | join('、') }}</td></tr>
    </table>
    {% endif %}
    {% endfor %}
    {% endif %}

    <!-- ===== 活かせる経験・知識・技術 (Skills) ===== -->
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">活かせる経験・知識・技術</span></td>
        </tr>
    </table>
    <table class="skills-table">
        <colgroup>
            <col style="width: 35mm;">
            <col>
        </colgroup>
        <thead>
            <tr>
                <th>カテゴリ</th>
                <th>詳細</th>
            </tr>
        </thead>
        <tbody>
            {% for skill in data.skills %}
            <tr>
                <td class="skills-category">{{ skill.category | default('') }}</td>
                <td>{{ skill.skills | join('、') if skill.skills else '' }}</td>
            </tr>
            {% endfor %}
            {% if not data.skills %}
            <tr>
                <td class="skills-category"></td>
                <td>未記入</td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    <!-- ===== 資格 (Certifications) ===== -->
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">資格</span></td>
        </tr>
    </table>
    <table class="cert-table">
        <colgroup>
            <col style="width: 30mm;">
            <col>
        </colgroup>
        <thead>
            <tr>
                <th>取得年月</th>
                <th>資格名</th>
            </tr>
        </thead>
        <tbody>
            {% for cert in data.certifications %}
            <tr>
                <td class="cert-date">{{ cert.date | default('') }}</td>
                <td>{{ cert.name | default('') }}</td>
            </tr>
            {% endfor %}
            {% if not data.certifications %}
            <tr>
                <td class="cert-date"></td>
                <td>未記入</td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    <!-- ===== 自己PR (Self-PR) ===== -->
    <table class="title-table">
        <tr class="section-title-row">
            <td><span class="section-title">自己PR</span></td>
        </tr>
    </table>
    <table class="title-table">
        <tr class="selfpr-row">
            <td>
                {{ data.strengths | default('未記入', true) }}
            </td>
        </tr>
    </table>

</div>

</body>
</html>
