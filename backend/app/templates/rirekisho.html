<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="base.css">
    <style>
        /* ===== Page 1 & 2 common styles ===== */
        .title-table td {
            border: none;
            padding: 0 0 3mm 0;
        }
        .title-text {
            font-size: 18pt;
            letter-spacing: 0.5em;
            font-weight: bold;
        }
        .date-text {
            text-align: right;
            font-size: 10pt;
            vertical-align: bottom;
        }

        /* ===== Personal info section ===== */
        .furigana-label,
        .furigana-content {
            height: 8mm;
            font-size: 8pt;
            vertical-align: middle;
            color: #333;
        }
        .name-label {
            height: 18mm;
            vertical-align: middle;
        }
        .name-content {
            height: 18mm;
            font-size: 16pt;
            vertical-align: middle;
        }
        .photo-area {
            width: 30mm;
            height: 40mm;
            border: 0.5pt dashed #999;
            text-align: center;
            vertical-align: middle;
            font-size: 7pt;
            color: #999;
        }
        .dob-row td {
            height: 8mm;
            vertical-align: middle;
        }

        /* ===== Address section ===== */
        .address-furigana td {
            height: 7mm;
            font-size: 8pt;
            color: #333;
            vertical-align: middle;
        }
        .address-row td {
            height: 14mm;
            vertical-align: top;
        }
        .contact-row td {
            height: 8mm;
            vertical-align: middle;
        }

        /* ===== Education / Work history ===== */
        .history-header th {
            height: 8mm;
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
            background-color: #f5f5f5;
        }
        .history-section-label td {
            height: 8mm;
            text-align: center;
            font-weight: bold;
            vertical-align: middle;
        }
        .history-row td {
            height: 8mm;
            vertical-align: middle;
        }
        .history-row .year-cell,
        .history-row .month-cell {
            text-align: center;
        }
        .history-end td {
            height: 8mm;
            vertical-align: middle;
        }

        /* ===== Page 2: Licenses section ===== */
        .license-header th {
            height: 8mm;
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
            background-color: #f5f5f5;
        }
        .license-row td {
            height: 8mm;
            vertical-align: middle;
        }
        .license-row .year-cell,
        .license-row .month-cell {
            text-align: center;
        }

        /* ===== Motivation section ===== */
        .motivation-label {
            font-weight: bold;
            vertical-align: top;
            font-size: 9pt;
            padding: 3mm 2mm;
        }
        .motivation-content {
            height: 40mm;
            vertical-align: top;
            padding: 3mm;
            line-height: 1.6;
        }

        /* ===== Commute / Dependents section ===== */
        .commute-table td {
            height: 14mm;
            text-align: center;
            vertical-align: middle;
            font-size: 9pt;
        }
        .commute-label {
            font-size: 8pt;
            font-weight: bold;
        }
        .commute-value {
            font-size: 10.5pt;
        }

        /* ===== Preferences section ===== */
        .preferences-label {
            font-weight: bold;
            vertical-align: top;
            font-size: 9pt;
            padding: 3mm 2mm;
        }
        .preferences-content {
            height: 30mm;
            vertical-align: top;
            padding: 3mm;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<!-- ============================================================ -->
<!-- PAGE 1                                                        -->
<!-- ============================================================ -->
<div class="page">

    <!-- Title + Date -->
    <table class="title-table">
        <colgroup>
            <col style="width: 60%;">
            <col style="width: 40%;">
        </colgroup>
        <tr>
            <td class="title-text">履　歴　書</td>
            <td class="date-text">{{ data.current_date_wareki }}</td>
        </tr>
    </table>

    <!-- Personal Info Section -->
    <table>
        <colgroup>
            <col style="width: 18mm;">
            <col>
            <col style="width: 32mm;">
        </colgroup>
        <tr>
            <td class="furigana-label">ふりがな</td>
            <td class="furigana-content">{{ data.personal_info.name_katakana | default('', true) }}</td>
            {% if photo_base64 %}
            <td rowspan="3" class="photo-area" style="border: none; padding: 0;">
                <img src="data:image/jpeg;base64,{{ photo_base64 }}" style="width: 30mm; height: 40mm; object-fit: cover;">
            </td>
            {% else %}
            <td rowspan="3" class="photo-area">写真を貼る位置<br><br>縦40mm×横30mm<br><br>裏面に氏名を記入</td>
            {% endif %}
        </tr>
        <tr>
            <td class="name-label">氏名</td>
            <td class="name-content">{{ data.personal_info.name | default('未記入', true) }}</td>
        </tr>
        <tr class="dob-row">
            <td>生年月日</td>
            <td>{{ data.personal_info.birth_date | default('未記入', true) }}</td>
        </tr>
    </table>

    <!-- Address Section -->
    <table>
        <colgroup>
            <col style="width: 18mm;">
            <col>
        </colgroup>
        <tr class="address-furigana">
            <td>ふりがな</td>
            <td></td>
        </tr>
        <tr class="address-row">
            <td style="vertical-align: middle;">現住所</td>
            <td>{{ data.personal_info.address | default('未記入', true) }}</td>
        </tr>
        <tr class="address-furigana">
            <td>ふりがな</td>
            <td></td>
        </tr>
        <tr class="address-row">
            <td style="vertical-align: middle;">連絡先</td>
            <td style="color: #999; font-size: 9pt;">（現住所以外に連絡を希望する場合のみ記入）</td>
        </tr>
    </table>

    <!-- Contact Row -->
    <table>
        <colgroup>
            <col style="width: 18mm;">
            <col style="width: 62mm;">
            <col style="width: 18mm;">
            <col>
        </colgroup>
        <tr class="contact-row">
            <td style="text-align: center;">電話</td>
            <td>{{ data.personal_info.phone | default('未記入', true) }}</td>
            <td style="text-align: center;">E-mail</td>
            <td>{{ data.personal_info.email | default('未記入', true) }}</td>
        </tr>
    </table>

    <!-- Education & Work History Section -->
    <table>
        <colgroup>
            <col style="width: 18mm;">
            <col style="width: 12mm;">
            <col>
        </colgroup>
        <thead>
            <tr class="history-header">
                <th>年</th>
                <th>月</th>
                <th>学歴・職歴</th>
            </tr>
        </thead>
        <tbody>
            <!-- Education label -->
            <tr class="history-section-label">
                <td></td>
                <td></td>
                <td>学　歴</td>
            </tr>
            <!-- Education entries (two rows per entry: 入学 + 卒業) -->
            {% for entry in data.education_processed %}
            <tr class="history-row">
                <td class="year-cell">{{ entry.start_year }}</td>
                <td class="month-cell">{{ entry.start_month }}</td>
                <td>{{ entry.school | default('', true) }}{% if entry.major %}　{{ entry.major }}{% endif %}　入学</td>
            </tr>
            <tr class="history-row">
                <td class="year-cell">{{ entry.end_year }}</td>
                <td class="month-cell">{{ entry.end_month }}</td>
                <td>{{ entry.school | default('', true) }}{% if entry.degree %}　{{ entry.degree }}{% endif %}　卒業</td>
            </tr>
            {% endfor %}
            <!-- Pad empty education rows to maintain grid (6 rows total) -->
            {% for i in range([6 - data.education_processed | length * 2, 0] | max) %}
            <tr class="history-row">
                <td class="year-cell"></td>
                <td class="month-cell"></td>
                <td></td>
            </tr>
            {% endfor %}
            <!-- Work history label -->
            <tr class="history-section-label">
                <td></td>
                <td></td>
                <td>職　歴</td>
            </tr>
            <!-- Work entries (two rows per entry: 入社 + 退社/現在に至る) -->
            {% for entry in data.work_history_processed %}
            <tr class="history-row">
                <td class="year-cell">{{ entry.start_year }}</td>
                <td class="month-cell">{{ entry.start_month }}</td>
                <td>{{ entry.company | default('', true) }}　入社</td>
            </tr>
            <tr class="history-row">
                {% if entry.end_year %}
                <td class="year-cell">{{ entry.end_year }}</td>
                <td class="month-cell">{{ entry.end_month }}</td>
                <td>{{ entry.company | default('', true) }}　退社</td>
                {% else %}
                <td class="year-cell"></td>
                <td class="month-cell"></td>
                <td>　　　　　（現在に至る）</td>
                {% endif %}
            </tr>
            {% endfor %}
            <!-- Pad empty work rows (6 rows total) -->
            {% for i in range([6 - data.work_history_processed | length * 2, 0] | max) %}
            <tr class="history-row">
                <td class="year-cell"></td>
                <td class="month-cell"></td>
                <td></td>
            </tr>
            {% endfor %}
            <!-- 以上 row -->
            <tr class="history-end">
                <td></td>
                <td></td>
                <td style="text-align: right; padding-right: 10mm;">以上</td>
            </tr>
        </tbody>
    </table>

</div>

<!-- ============================================================ -->
<!-- PAGE 2                                                        -->
<!-- ============================================================ -->
<div class="page page-break">

    <!-- Licenses & Qualifications Section -->
    <table>
        <colgroup>
            <col style="width: 18mm;">
            <col style="width: 12mm;">
            <col>
        </colgroup>
        <thead>
            <tr class="license-header">
                <th>年</th>
                <th>月</th>
                <th>免許・資格</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in data.certifications_processed %}
            <tr class="license-row">
                <td class="year-cell">{{ entry.date_year }}</td>
                <td class="month-cell">{{ entry.date_month }}</td>
                <td>{{ entry.name | default('', true) }}</td>
            </tr>
            {% endfor %}
            <!-- Pad empty license rows (6 rows total) -->
            {% for i in range([6 - data.certifications_processed | length, 0] | max) %}
            <tr class="license-row">
                <td class="year-cell"></td>
                <td class="month-cell"></td>
                <td></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Motivation / Skills Section -->
    <table>
        <colgroup>
            <col style="width: 40mm;">
            <col>
        </colgroup>
        <tr>
            <td class="motivation-label">志望動機・特技・<br>好きな学科・<br>アピールポイントなど</td>
            <td class="motivation-content">
                {{ data.motivation | default('未記入', true) }}
            </td>
        </tr>
    </table>

    <!-- Commute / Dependents Section -->
    <table class="commute-table">
        <colgroup>
            <col style="width: 25%;">
            <col style="width: 25%;">
            <col style="width: 25%;">
            <col style="width: 25%;">
        </colgroup>
        <tr>
            <td>
                <span class="commute-label">通勤時間</span><br>
                <span class="commute-value">約　時間　分</span>
            </td>
            <td>
                <span class="commute-label">扶養家族（配偶者を除く）</span><br>
                <span class="commute-value">0 人</span>
            </td>
            <td>
                <span class="commute-label">配偶者</span><br>
                <span class="commute-value">無</span>
            </td>
            <td>
                <span class="commute-label">配偶者の扶養義務</span><br>
                <span class="commute-value">無</span>
            </td>
        </tr>
    </table>

    <!-- Preferences Section -->
    <table>
        <colgroup>
            <col style="width: 40mm;">
            <col>
        </colgroup>
        <tr>
            <td class="preferences-label">本人希望記入欄<br><span style="font-weight: normal; font-size: 7pt;">（特に給料・職種・<br>勤務時間・勤務地・<br>その他についての希望<br>などがあれば記入）</span></td>
            <td class="preferences-content">
                {{ data.other | default('貴社規定に従います。', true) }}
            </td>
        </tr>
    </table>

</div>

</body>
</html>
