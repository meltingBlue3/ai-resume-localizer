---
phase: 01-foundation-risk-mitigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/tsconfig.app.json
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/index.css
  - frontend/src/vite-env.d.ts
  - frontend/src/i18n/index.ts
  - frontend/src/i18n/locales/zh/common.json
  - frontend/src/i18n/locales/zh/wizard.json
  - frontend/src/i18n/locales/ja/common.json
  - frontend/src/i18n/locales/ja/wizard.json
  - frontend/src/stores/useWizardStore.ts
  - frontend/src/components/wizard/WizardShell.tsx
  - frontend/src/components/wizard/StepIndicator.tsx
  - frontend/src/components/wizard/StepNavigation.tsx
  - frontend/src/components/wizard/LanguageSwitcher.tsx
  - frontend/src/steps/UploadStep.tsx
  - frontend/src/steps/ReviewExtractionStep.tsx
  - frontend/src/steps/ReviewTranslationStep.tsx
  - frontend/src/steps/PreviewStep.tsx
  - frontend/src/steps/DownloadStep.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate through 5 wizard steps (Upload → Review Extraction → Review Translation → Preview → Download) with placeholder content at each step"
    - "User can navigate back to any previous step without losing data entered in other steps"
    - "User can view the entire UI in Chinese or Japanese and switch languages at any time"
  artifacts:
    - path: "frontend/src/stores/useWizardStore.ts"
      provides: "Wizard step state management with navigation actions and per-step data persistence"
      exports: ["useWizardStore"]
    - path: "frontend/src/components/wizard/WizardShell.tsx"
      provides: "Main wizard container that renders current step component based on store state"
      min_lines: 30
    - path: "frontend/src/components/wizard/StepIndicator.tsx"
      provides: "Visual step progress indicator with clickable steps"
      min_lines: 20
    - path: "frontend/src/components/wizard/StepNavigation.tsx"
      provides: "Previous/Next navigation buttons"
      min_lines: 15
    - path: "frontend/src/components/wizard/LanguageSwitcher.tsx"
      provides: "Toggle between Chinese and Japanese UI"
      min_lines: 10
    - path: "frontend/src/i18n/index.ts"
      provides: "i18next configuration with zh/ja resources and namespace-based JSON"
      contains: "initReactI18next"
    - path: "frontend/src/i18n/locales/zh/common.json"
      provides: "Chinese UI translations"
    - path: "frontend/src/i18n/locales/ja/common.json"
      provides: "Japanese UI translations"
  key_links:
    - from: "frontend/src/components/wizard/WizardShell.tsx"
      to: "frontend/src/stores/useWizardStore.ts"
      via: "Zustand hook reads currentStep, renders matching step component"
      pattern: "useWizardStore"
    - from: "frontend/src/components/wizard/StepNavigation.tsx"
      to: "frontend/src/stores/useWizardStore.ts"
      via: "Calls nextStep/prevStep actions to update currentStep"
      pattern: "(nextStep|prevStep)"
    - from: "frontend/src/components/wizard/StepIndicator.tsx"
      to: "frontend/src/stores/useWizardStore.ts"
      via: "Reads currentStep for active state, calls setStep for click navigation"
      pattern: "setStep"
    - from: "frontend/src/components/wizard/LanguageSwitcher.tsx"
      to: "i18n.changeLanguage"
      via: "useTranslation hook calls changeLanguage('zh'|'ja')"
      pattern: "changeLanguage"
    - from: "frontend/src/App.tsx"
      to: "frontend/src/i18n/index.ts"
      via: "Side-effect import initializes i18next before React renders"
      pattern: "import.*i18n"
---

<objective>
Scaffold the frontend React application and build a fully navigable 5-step bilingual wizard shell with Chinese (primary) and Japanese (secondary) UI.

Purpose: Establishes the frontend foundation — users can navigate all wizard steps, go back without losing data, and switch languages. This is the user-facing shell that all subsequent phases (upload, extraction, translation, preview) will plug into.
Output: A running Vite dev server at localhost:5173 showing a 5-step wizard with placeholder content, step indicator, navigation buttons, and a language switcher.
</objective>

<execution_context>
@.planning/phases/01-foundation-risk-mitigation/01-RESEARCH.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold frontend project with Vite, React, TypeScript, Tailwind CSS 4, and all dependencies</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tsconfig.app.json
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/index.css
    frontend/src/vite-env.d.ts
  </files>
  <action>
    1. Scaffold a new Vite project in `frontend/` using the react-ts template:
       ```
       npm create vite@latest frontend -- --template react-ts
       ```

    2. Install runtime dependencies:
       ```
       cd frontend
       npm install react-router react-i18next i18next i18next-browser-languagedetector zustand
       ```

    3. Install dev dependencies:
       ```
       npm install -D tailwindcss @tailwindcss/vite
       ```

    4. Configure `vite.config.ts`:
       - Import and add `tailwindcss()` from `@tailwindcss/vite` to the plugins array (alongside the existing react plugin)
       - Add `server.proxy` mapping `/api` to `http://localhost:8000` for backend communication in later phases

    5. Replace `src/index.css` content with Tailwind v4 entry:
       ```css
       @import "tailwindcss";
       ```
       Note: Tailwind v4 uses `@import "tailwindcss"` — NOT the v3 `@tailwind base/components/utilities` directives. No tailwind.config.js file needed.

    6. Clean up Vite scaffold: delete `src/App.css`, the default Vite logo SVG files, and the counter demo code from `App.tsx`. Keep `App.tsx` as a minimal shell (will be filled in Task 2).

    7. Verify the dev server starts: `npm run dev` should compile without errors and serve on localhost:5173.
  </action>
  <verify>
    Run `cd frontend && npm run dev` — dev server starts without errors on http://localhost:5173. Run `npm run build` — builds without TypeScript or Tailwind errors.
  </verify>
  <done>
    Vite dev server runs, TypeScript compiles, Tailwind CSS processes styles, and `npm run build` succeeds with zero errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build i18n, wizard store, and all wizard UI components with routing</name>
  <files>
    frontend/src/i18n/index.ts
    frontend/src/i18n/locales/zh/common.json
    frontend/src/i18n/locales/zh/wizard.json
    frontend/src/i18n/locales/ja/common.json
    frontend/src/i18n/locales/ja/wizard.json
    frontend/src/stores/useWizardStore.ts
    frontend/src/components/wizard/WizardShell.tsx
    frontend/src/components/wizard/StepIndicator.tsx
    frontend/src/components/wizard/StepNavigation.tsx
    frontend/src/components/wizard/LanguageSwitcher.tsx
    frontend/src/steps/UploadStep.tsx
    frontend/src/steps/ReviewExtractionStep.tsx
    frontend/src/steps/ReviewTranslationStep.tsx
    frontend/src/steps/PreviewStep.tsx
    frontend/src/steps/DownloadStep.tsx
    frontend/src/App.tsx
    frontend/src/main.tsx
  </files>
  <action>
    **i18n Setup (`src/i18n/index.ts`):**
    - Initialize i18next with react-i18next and browser language detector
    - Default language: `zh` (Chinese primary), fallback: `zh`
    - Two namespaces: `common` (shared labels like "next", "previous", language names) and `wizard` (step names, descriptions, placeholder content)
    - Import JSON translation files statically (no lazy loading needed for 2 languages)
    - Export configured i18n instance

    **Translation files — both zh and ja MUST have identical key structures:**
    - `common.json`: keys for `appTitle`, `next`, `previous`, `finish`, `step`, `languageName` (中文/日本語), `switchLanguage`
    - `wizard.json`: keys for each step — `steps.upload.title`, `steps.upload.description`, `steps.reviewExtraction.title`, `steps.reviewExtraction.description`, `steps.reviewTranslation.title`, `steps.reviewTranslation.description`, `steps.preview.title`, `steps.preview.description`, `steps.download.title`, `steps.download.description`
    - Also include `wizard.placeholder` key with a message like "This step will be implemented in a future phase"

    **Zustand Wizard Store (`src/stores/useWizardStore.ts`):**
    - Interface: `currentStep: number`, `totalSteps: 5`, `stepData: Record<number, unknown>`, actions: `setStep(n)`, `nextStep()`, `prevStep()`, `setStepData(step, data)`
    - `setStep` validates bounds (0 to totalSteps-1)
    - `nextStep` increments if not at last step
    - `prevStep` decrements if not at first step
    - `setStepData` merges data for given step index (does NOT clear other steps' data — critical for back-navigation data preservation)
    - Follow the exact Zustand pattern from research: `create<WizardState>((set, get) => ({...}))`

    **WizardShell (`src/components/wizard/WizardShell.tsx`):**
    - Main layout container with: LanguageSwitcher in top-right header area, app title (translated), StepIndicator below header, current step content in main area, StepNavigation at bottom
    - Reads `currentStep` from useWizardStore
    - Maps step index to step component: 0→UploadStep, 1→ReviewExtractionStep, 2→ReviewTranslationStep, 3→PreviewStep, 4→DownloadStep
    - Use a clean, modern design with Tailwind: centered max-width container (~max-w-4xl), subtle card/panel for step content, generous padding

    **StepIndicator (`src/components/wizard/StepIndicator.tsx`):**
    - Horizontal row of 5 step indicators connected by lines
    - Each step shows: step number (circle), translated step name below
    - Visual states: completed (filled/checkmark), active (highlighted/primary color), upcoming (muted/gray)
    - Clicking a completed or active step calls `setStep(n)` — users CAN navigate back by clicking
    - Use Tailwind: flex row, gap, transition colors, responsive (stack labels below circles on mobile)

    **StepNavigation (`src/components/wizard/StepNavigation.tsx`):**
    - Two buttons: Previous (left) and Next (right), both translated via `t('common:previous')` / `t('common:next')`
    - First step (0): hide Previous button
    - Last step (4): change Next to a "Finish" or "Complete" label
    - Calls `prevStep()` / `nextStep()` on useWizardStore
    - Style: primary-colored Next button, secondary/outline Previous button

    **LanguageSwitcher (`src/components/wizard/LanguageSwitcher.tsx`):**
    - Two buttons or a toggle: 中文 / 日本語
    - Active language is visually highlighted
    - Calls `i18n.changeLanguage('zh')` or `i18n.changeLanguage('ja')`
    - Compact design suitable for header placement

    **5 Placeholder Step Components (`src/steps/*.tsx`):**
    - Each step component: displays translated step title (from wizard namespace), translated description, and a placeholder message indicating future implementation
    - Include a simple form input in at least 2 steps (e.g., a text field in UploadStep and PreviewStep) so back-navigation data persistence can be verified — use `useWizardStore().setStepData` to save input, read from `stepData[stepIndex]` to restore
    - Use `useTranslation('wizard')` hook in each step
    - Each should be visually distinct (different icon or color accent) so step navigation is obvious

    **App.tsx:**
    - Import `./i18n` (side-effect import to initialize i18next)
    - Render `<WizardShell />` as the main content
    - No react-router routes needed yet (wizard is step-based via Zustand, not URL-based) — but import BrowserRouter wrapping for future use

    **main.tsx:**
    - Import `./i18n` before React render to ensure i18n is initialized
    - Standard React 19 createRoot pattern

    **Design guidelines:**
    - Modern, clean UI with good whitespace
    - Color scheme: professional blue/indigo primary, gray neutrals
    - The wizard should feel like a guided, reassuring process (the user is converting their resume — they want to feel in control)
    - All visible text MUST use `t()` translation function — no hardcoded Chinese or Japanese strings
  </action>
  <verify>
    1. Run `npm run dev` — wizard shell renders with all 5 steps accessible
    2. Click through all 5 steps using Next button — each shows distinct placeholder content
    3. Click Previous to go back — previously entered data in form inputs is preserved
    4. Click step indicators to jump to any visited step — works correctly
    5. Click 中文/日本語 switcher — ALL visible text changes language immediately
    6. Run `npm run build` — zero TypeScript errors
  </verify>
  <done>
    A fully navigable 5-step wizard with bilingual Chinese/Japanese UI runs at localhost:5173. Users can move forward, backward, click step indicators, and switch languages without losing data. All text is translated.
  </done>
</task>

</tasks>

<verification>
- `npm run dev` serves the wizard UI at localhost:5173
- All 5 steps render with placeholder content and translated labels
- Forward/backward navigation works via buttons and step indicator clicks
- Data entered in step inputs persists across navigation (back and forth)
- Language switch between 中文 and 日本語 updates all visible text immediately
- `npm run build` completes with zero errors
</verification>

<success_criteria>
1. User navigates through all 5 wizard steps with distinct placeholder content
2. User navigates back to previous steps — any data entered in form inputs is preserved
3. User switches between Chinese and Japanese — all UI text updates without page reload
4. TypeScript compiles without errors, Vite build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-risk-mitigation/01-01-SUMMARY.md`
</output>
